- name: Update and Upgrade Apt
  apt:
    upgrade: yes
    update_cache: true
    cache_valid_time: 3600
    force_apt_get: true

- name: Install Packages
  package:
    name:
      - curl
      - trash-cli
      - python3-pip
      - silversearcher-ag
      - fd-find
      - ripgrep
      - bat
      - unzip
      - fzf
      - duf
      - ncdu
      - tmux
      - stow

- name: Check for exa bin
  stat:
    path: /home/linuxbrew/.linuxbrew/bin/exa
  register: exa_bin

- name: homebrew reload
  shell: (echo; echo 'eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"') >> $HOME/.profile && eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"
  when: brew_bin.stat.exists == false
  tags:
    - brew
  when:  exa_bin.stat.exists == false

- name: Instal brew apps
  community.general.homebrew:
    name:
      - lazygit
      - dust
      - gh
      - sd
      - xh
      - exa
  when:  exa_bin.stat.exists == false
